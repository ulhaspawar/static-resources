function loadScript(e){return new Promise(((n,t)=>{const a=document.createElement("script");a.src=e,a.onload=n,a.onerror=t,document.head.appendChild(a)}))}function loadCSS(e){return new Promise(((n,t)=>{const a=document.createElement("link");a.href=e,a.rel="stylesheet",a.onload=n,a.onerror=t,document.head.appendChild(a)}))}async function loadResources(){try{const e=(new Date).getTime();await Promise.all([loadCSS(`https://makeup.sdk.orbo.ai/WAjLANasI8/4.0.0/smart-capture/orbo-clinikally-skinanalysis.css?t=${e}`),loadCSS(`https://cdn.jsdelivr.net/gh/ulhaspawar/static-resources@e17e0ec/eyllek/style.css?t=${e}`),loadScript(`https://makeup.sdk.orbo.ai/WAjLANasI8/4.0.0/smart-capture/orbo-clinikally-skinanalysis.js?t=${e}`),loadScript(`https://cdn.jsdelivr.net/gh/ulhaspawar/static-resources@e17e0ec/eyllek/orbo-skin-analyzer.umd.js?t=${e}`)]),console.log("All skin analyzer resources loaded successfully")}catch(e){throw console.error("Failed to load skin analyzer resources:",e),e}}function initializeSkinAnalyzer(){const e=document.createElement("div");function n(){const e=new URLSearchParams(window.location.search).get("ca");e&&"t"===e?"undefined"!=typeof OrboSkinAnalyzer&&OrboSkinAnalyzer.startOrboSkinAnalyzer?OrboSkinAnalyzer.startOrboSkinAnalyzer():console.error("OrboSkinAnalyzer is not available"):window.parent.postMessage({type:"allowCameraAccess",src:window.location.href},"*")}e.id="orbo-cc-skin-analyzer-container",e.style.cssText="width: 100%; min-height: 100vh; display: flex; justify-content: center; align-items: center; position: relative;",document.body.appendChild(e),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}export async function startSkinAnalyzer(){try{await loadResources(),initializeSkinAnalyzer()}catch(e){throw console.error("Failed to start skin analyzer:",e),e}}loadResources().catch(console.error);